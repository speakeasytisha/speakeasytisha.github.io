/* =========================================================
   SpeakEasyTisha · Shopping Spree
   FIXES:
   - Correct contrast inside white cards (tabs/pills/ghost buttons)
   - Flashcard backface reliability
   - Sentence order "bank → answer" styling
   ========================================================= */

:root{
  --bg1:#072c33;
  --bg2:#0f172ad9;
  --bg3:#0f172ad9;

  --card:#e11f1f;
  --text:#0e1f24;
  --muted:#51656b;

  --shadow: 0 14px 40px rgba(0,0,0,.16);
  --shadow2: 0 10px 26px rgba(0,0,0,.12);
  --radius: 18px;

  --accent1:#08b3c7;
  --accent2:#00d0a8;

  --btnText:#062126;
  --border: rgba(12, 46, 52, .12);
  --chip: rgba(6, 41, 48, .06);

  --ok:#138a5e;
  --bad:#b33a3a;

  --focus: 0 0 0 4px rgba(8,179,199,.18);
}

*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; }
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: radial-gradient(1200px 800px at 20% -10%, rgba(255,255,255,.10), transparent 60%),
              radial-gradient(900px 700px at 90% 0%, rgba(255,255,255,.08), transparent 55%),
              linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
  min-height:100vh;
}
a{ color: inherit; text-decoration:none; }
button{ font: inherit; }
.container{
  width:min(1100px, calc(100% - 2rem));
  margin:0 auto;
}

.muted{ color: var(--muted); }
.muted-on-dark{ color: rgba(236, 30, 30, 0.88); }
.lead{ font-size:1.05rem; line-height:1.5; color: rgba(255,255,255,.92); }
.note{
  background: rgba(255,255,255,.62);
  border: 1px solid rgba(255,255,255,.55);
  padding: .85rem 1rem;
  border-radius: 14px;
  line-height: 1.5;
}
.stat__value {
    color: #fff;
}
/* ---------- Dark context helper ---------- */
.on-dark{ color: #333; }

/* ---------- Top bar ---------- */
.se-accentbar{
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(10px);
  background: rgba(6, 27, 31, .55);
  border-bottom: 1px solid rgba(255,255,255,.12);
}
.se-accentbar__inner{
  width:min(1200px, calc(100% - 1.5rem));
  margin:0 auto;
  padding: .7rem 0;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
  flex-wrap: wrap;
}
.se-brand{
  display:flex; align-items:baseline; gap:.5rem;
  color: rgba(255,255,255,.92);
}
.se-brand__mark{ font-weight: 750; letter-spacing:.2px; }
.se-brand__sep{ opacity:.6; }
.se-brand__page{ opacity:.85; font-weight: 600; }

.se-accentbar__controls{
  display:flex;
  align-items:center;
  gap:.55rem;
  flex-wrap: wrap;
}

/* ---------- Hero ---------- */
.hero{ padding: 2.2rem 0 1rem; }
.hero__inner{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 1.2rem;
  align-items: start;
}
.hero h1{
  margin: 0 0 .35rem;
  font-size: clamp(2.0rem, 4vw, 3.0rem);
  line-height: 1.08;
  color: #fff;
  letter-spacing: .2px;
}
.hero__text{ padding: 1rem 0; }
.hero__card{ padding: 1rem 0; }

/* ---------- Stats ---------- */
.hero__stats{
  margin: 1rem 0 1.1rem;
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: .75rem;
}
.stat{
  border-radius: 16px;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.18);
  padding: .75rem .85rem;
}
.stat__label{
  font-size: .82rem;
  opacity: .85;
  margin-bottom: .15rem;
    color: #fff;
}
.stat__value{ font-weight: 750; }

/* ---------- Sections ---------- */
.section{ margin: 1.25rem 0 2.2rem; }
.section__head{ margin: 0 0 .8rem; }
.section__head h2{
  margin: 0 0 .25rem;
  font-size: 1.55rem;
}

/* ---------- Cards ---------- */
.card{
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(255,255,255,.7);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1.1rem;
  margin-bottom: 1rem;
  color: var(--text);
}
.card:hover{
  transform: translateY(-1px);
  transition: transform .15s ease, box-shadow .15s ease;
  box-shadow: 0 18px 52px rgba(0,0,0,.18);
}
.card__head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: .75rem;
  flex-wrap: wrap;
  margin-bottom: .5rem;
}
.card__head h3, .card__head h2{ margin:0; }
.card__actions{ display:flex; gap:.5rem; flex-wrap:wrap; }

.subcard{
  background: rgba(255,255,255,.78);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: .95rem;
  color: var(--text);
}

/* ---------- Layout helpers ---------- */
.two-col{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: .9rem;
  align-items: start;
}
.grid{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap: .85rem;
}
.grid--2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
.row{
  display:flex;
  align-items:center;
  gap:.6rem;
  flex-wrap: wrap;
  margin-top: .65rem;
}

/* ---------- Buttons ---------- */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.4rem;
  padding: .7rem 1rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.55);
  background: linear-gradient(135deg, var(--accent1), var(--accent2));
  color: var(--btnText);
  font-weight: 800;
  cursor:pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
}
.btn:hover{ filter: brightness(1.03); }
.btn:focus{ outline:none; box-shadow: var(--shadow2), var(--focus); }

.btn--small{
  padding: .55rem .85rem;
  font-weight: 750;
  font-size: .95rem;
}

/* Ghost buttons: DEFAULT = readable inside cards (dark text) */
.btn--ghost{
  background: rgba(6, 41, 48, .06);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: none;
}
.btn--ghost:hover{ background: rgba(6, 41, 48, .09); }

/* Ghost buttons on dark areas */
.on-dark .btn--ghost{
  background: rgba(18, 16, 16, 0.18);
  color: rgba(255,255,255,.95);
  border: 1px solid rgba(255,255,255,.26);
}
.on-dark .btn--ghost:hover{ background: rgba(217, 20, 61, 0.22); }

/* ---------- Tabs / pills ---------- */
.tabs{ display:flex; gap:.45rem; flex-wrap:wrap; }

/* Tabs DEFAULT = for inside cards (dark text) */
.tab{
  padding: .55rem .8rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(6, 41, 48, .06);
  color: var(--text);
  font-weight: 800;
  cursor:pointer;
}
.tab.is-active{
  background: rgba(8,179,199,.12);
  border-color: rgba(8,179,199,.28);
}

/* Tabs on dark */
.tabs.on-dark .tab{
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.30);
  color: rgba(23, 3, 3, 0.95);
}
.tabs.on-dark .tab.is-active{
  background: linear-gradient(135deg, rgba(255,255,255,.30), rgba(255,255,255,.18));
  border-color: rgba(255,255,255,.40);
}

/* Pills DEFAULT = for inside cards */
.pill{
  display:inline-flex;
  border-radius: 999px;
  border: 1px solid var(--border);
  overflow:hidden;
  background: rgba(6, 41, 48, .06);
}
.pill__btn{
  padding: .5rem .7rem;
  border: 0;
  background: transparent;
  color: var(--text);
  font-weight: 850;
  cursor:pointer;
}
.pill__btn.is-active{
  background: rgba(8,179,199,.12);
}

/* Pills on dark */
.on-dark .pill{
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(75, 239, 28, 0.1);
}
.on-dark .pill__btn{ color: rgba(239, 17, 17, 0.92); }
.on-dark .pill__btn.is-active{ background: rgba(255,255,255,.22); color:#fff; }

/* ---------- Toolbar ---------- */
.toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: .75rem;
  flex-wrap:wrap;
  margin-bottom: .85rem;
}
.toolbar__right{ display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; }

/* ---------- Switch ---------- */
.switch{
  display:flex; align-items:center; gap:.55rem;
  user-select:none;
  color: rgba(12, 2, 28, 0.92);
}
.switch input{ display:none; }
.switch__track{
  width: 44px; height: 26px;
  border-radius: 999px;
  background: rgba(4, 20, 242, 0.92);
  border: 1px solid rgba(255,255,255,.22);
  position: relative;
  cursor:pointer;
}
.switch__track::after{
  content:"";
  width: 20px; height: 20px;
  border-radius: 999px;
  background: #fff;
  position:absolute;
  top: 50%;
  left: 4px;
  transform: translateY(-50%);
  transition: left .15s ease;
}
.switch input:checked + .switch__track::after{ left: 20px; }
.switch__label{ font-weight: 650; }

/* ---------- Mini card ---------- */
.mini-card{
  background: rgba(255,255,255,.9);
  border: 1px solid rgba(255,255,255,.65);
  box-shadow: var(--shadow2);
  border-radius: var(--radius);
  padding: 1.1rem;
  color: var(--text);
}
.mini-card__title{ font-weight: 900; margin-bottom: .55rem; }
.mini-card__list{ margin: 0 0 1rem; padding-left: 1.1rem; line-height: 1.55; }

/* ---------- Flashcards (GUARANTEED FLIP: no 3D, pure swap) ---------- */
.flashcard { position: relative; }

.flashcard__inner{
  position: relative;
  border-radius: 16px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow2);
  min-height: 178px;
  overflow: hidden;
  cursor: pointer;
  background: #fff;               /* force readable base */
  color: var(--text);
}

/* faces */
.flashcard__face{
  position: absolute;
  inset: 0;
  padding: .9rem;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: .45rem;

  background: #fff;
  color: var(--text);

  transition: opacity .22s ease, transform .22s ease;
}

/* default: show FRONT */
.flashcard__front{ opacity: 1; transform: translateY(0); z-index: 2; }
.flashcard__back { opacity: 0; transform: translateY(8px); z-index: 1; pointer-events: none; }

/* flipped: show BACK */
.flashcard.is-flipped .flashcard__front,
.flashcard__inner.is-flipped .flashcard__front{
  opacity: 0;
  transform: translateY(-8px);
  pointer-events: none;
  z-index: 1;
}

.flashcard.is-flipped .flashcard__back,
.flashcard__inner.is-flipped .flashcard__back{
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
  z-index: 3;
}

/* make sure text is visible even inside .on-dark sections */
.flashcard .badge,
.flashcard .word,
.flashcard .def,
.flashcard .ex,
.flashcard .muted{
  color: var(--text) !important;
}

.flashcard .muted{ opacity: .8; }

.flashcard .def{ color: var(--muted) !important; font-weight: 750; line-height: 1.35; }

.flashcard .ex{
  font-size: .92rem;
  border-top: 1px dashed rgba(12,46,52,.18);
  padding-top: .45rem;
  color: rgba(14,31,36,.92) !important;
  font-weight: 750;
}


/* ---------- Quizzes ---------- */
.quiz{ display:grid; gap: .75rem; color: var(--text); }
.q{
  border: 1px solid var(--border);
  background: rgba(255,255,255,.75);
  border-radius: 14px;
  padding: .75rem;
}
.q__prompt{ font-weight: 900; margin-bottom: .55rem; }
.opts{ display:grid; gap: .45rem; }
.opt{
  border: 1px solid rgba(12,46,52,.14);
  border-radius: 12px;
  background: #fff;
  padding: .55rem .65rem;
  cursor:pointer;
  text-align:left;
  font-weight: 800;
}
section#hours {
    background-color: #fff;
}
.opt:hover{ filter: brightness(1.01); }
.opt:focus{ outline:none; box-shadow: var(--focus); }
.opt.is-correct{ border-color: rgba(19,138,94,.45); background: rgba(19,138,94,.10); }
.opt.is-wrong{ border-color: rgba(179,58,58,.45); background: rgba(179,58,58,.10); }

.feedback{ font-weight: 900; }
.feedback.ok{ color: var(--ok); }
.feedback.bad{ color: var(--bad); }

/* ---------- Drag & Drop ---------- */
.dd-row{
  display:grid;
  grid-template-columns: .9fr 1.1fr;
  gap: .9rem;
}
.dd-bank{
  min-height: 140px;
  border-radius: 16px;
  border: 1px dashed rgba(12,46,52,.25);
  background: rgba(255,255,255,.6);
  padding: .7rem;
  display:flex;
  gap: .5rem;
  flex-wrap: wrap;
  align-content: flex-start;
}
.dd-targets{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: .8rem;
}
.dd-targets--3{ grid-template-columns: repeat(3, minmax(0,1fr)); }
.dd-target{
  border-radius: 16px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.6);
  padding: .7rem;
}
.dd-target__title{
  font-weight: 950;
  margin-bottom: .55rem;
}
.dd-target__zone{
  min-height: 105px;
  border-radius: 12px;
  border: 1px dashed rgba(12,46,52,.22);
  padding: .55rem;
  display:flex;
  gap:.45rem;
  flex-wrap: wrap;
  align-content: flex-start;
}
.dd-chip{
  border-radius: 999px;
  padding: .45rem .65rem;
  border: 1px solid rgba(12,46,52,.18);
  background: #fff;
  font-weight: 900;
  cursor: grab;
  user-select:none;
}
.dd-chip:active{ cursor: grabbing; }
.dd-target__zone.is-over,
.dd-bank.is-over{
  box-shadow: var(--focus);
}

/* ---------- Sentence builder ---------- */
.chips{
  display:flex;
  gap:.5rem;
  flex-wrap:wrap;
  margin: .6rem 0 .75rem;
}
.chip{
  border-radius: 999px;
  padding: .45rem .7rem;
  border: 1px solid rgba(12,46,52,.18);
  background: #fff;
  font-weight: 900;
  cursor: grab;
  user-select:none;
}
.builder{
  border: 1px solid var(--border);
  background: rgba(255,255,255,.68);
  border-radius: 16px;
  padding: .85rem;
}
.builder__line{
  font-weight: 900;
  line-height: 1.75;
  color: var(--text);
}
.slot{
  display:inline-block;
  min-width: 70px;
  padding: .12rem .35rem;
  border-radius: 10px;
  border: 1px dashed rgba(12,46,52,.28);
  background: rgba(255,255,255,.7);
}
.builder__prompt{ font-weight: 950; margin-bottom: .4rem; }
#politeLine{
  min-height: 52px;
  border-radius: 14px;
  border: 1px dashed rgba(12,46,52,.25);
  background: rgba(255,255,255,.75);
  padding: .6rem .7rem;
}

/* ---------- Sentence Order (FIXED: Bank → Answer) ---------- */
.order{
  display:grid;
  gap: .65rem;
}
.orderZoneTitle{
  font-weight: 950;
  margin: 0 0 .35rem;
}
.orderBank, .orderAnswer{
  border-radius: 16px;
  border: 1px dashed rgba(12,46,52,.25);
  padding: .7rem;
  min-height: 74px;
  background: rgba(255,255,255,.65);
  display:flex;
  gap:.5rem;
  flex-wrap: wrap;
  align-content: flex-start;
}
.orderHint{
  font-size: .92rem;
  color: rgba(14,31,36,.78);
  font-weight: 800;
}

/* ---------- Dialogue ---------- */
.dialogue{ display:grid; gap:.55rem; margin: .85rem 0 .7rem; color: var(--text); }
.line{ display:flex; gap:.6rem; align-items:flex-start; }
.bubble{
  padding: .7rem .85rem;
  border-radius: 16px;
  border: 1px solid rgba(12,46,52,.14);
  background: rgba(255,255,255,.85);
  line-height: 1.45;
}
.bubble.clerk{ border-top-left-radius: 6px; }
.bubble.you{
  border-top-right-radius: 6px;
  background: rgba(8,179,199,.10);
  border-color: rgba(8,179,199,.28);
}
.who{ font-weight: 950; min-width: 62px; padding-top: .15rem; color: var(--text); }
.choices{ display:flex; gap:.5rem; flex-wrap:wrap; }
.choice{
  border-radius: 16px;
  border: 1px solid rgba(12,46,52,.18);
  background: #fff;
  padding: .6rem .75rem;
  font-weight: 900;
  cursor:pointer;
}
.choice:hover{ filter: brightness(1.01); }
.choice:focus{ outline:none; box-shadow: var(--focus); }

/* ---------- Culture cards ---------- */
.culture{
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.65);
  background: rgba(255,255,255,.92);
  box-shadow: var(--shadow2);
  padding: 1rem;
  color: var(--text);
}
.culture__title{
  display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  margin-bottom: .4rem;
}
.culture__title h3{ margin:0; }
.culture__tags{ display:flex; gap:.35rem; flex-wrap:wrap; }
.tag{
  font-weight: 900;
  font-size: .75rem;
  padding: .22rem .5rem;
  border-radius: 999px;
  background: var(--chip);
  border: 1px solid var(--border);
}
.culture__cols{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: .75rem;
  margin-top: .65rem;
}
.k{
  border-radius: 14px;
  border: 1px solid rgba(12,46,52,.14);
  background: rgba(255,255,255,.78);
  padding: .7rem;
}
.k h4{ margin: 0 0 .35rem; }
.k p{ margin: 0; line-height: 1.45; color: rgba(14,31,36,.9); }

/* ---------- Hours ---------- */
.hours{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: .9rem;
  align-items:start;
  color: var(--text);
}
.hours__sign{
  border-radius: 18px;
  border: 2px solid rgba(12,46,52,.18);
  background: rgba(255,255,255,.85);
  padding: 1rem;
}
.hours__title{
  font-weight: 1000;
  letter-spacing: .3px;
  margin-bottom: .7rem;
}
.hours__table{
  width:100%;
  border-collapse: collapse;
  overflow:hidden;
  border-radius: 14px;
  border: 1px solid rgba(12,46,52,.16);
}
.hours__table td{
  padding: .6rem .65rem;
  border-bottom: 1px solid rgba(12,46,52,.10);
}
.hours__table tr:last-child td{ border-bottom: 0; }
.hours__quiz h3{ margin-top: 0; }

.footer{
  padding: 1.6rem 0 2.2rem;
}
.footer__inner{
  display:flex;
  justify-content:space-between;
  gap: 1rem;
  flex-wrap: wrap;
  border-top: 1px solid rgba(255,255,255,.16);
  padding-top: 1rem;
}

/* ---------- Responsive ---------- */
@media (max-width: 980px){
  .hero__inner{ grid-template-columns: 1fr; }
  .hero__stats{ grid-template-columns: 1fr; }
  .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .two-col{ grid-template-columns: 1fr; }
  .dd-row{ grid-template-columns: 1fr; }
  .hours{ grid-template-columns: 1fr; }
  .dd-targets--3{ grid-template-columns: 1fr; }
}
