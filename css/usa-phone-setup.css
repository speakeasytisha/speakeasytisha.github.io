:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --ink:#111827;
  --muted:#6b7280;
  --line:#e5e7eb;
  --soft:#f1f5f9;
  --accent:#2563eb;
  --accent2:#0ea5e9;
  --ok:#16a34a;
  --bad:#dc2626;

  --radius:18px;
  --shadow: 0 10px 24px rgba(17,24,39,.08);
  --touch:44px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--ink);
  background:linear-gradient(180deg, #eef2ff 0%, var(--bg) 24%, var(--bg) 100%);
}

a{color:var(--accent)}
a:hover{opacity:.9}

.topbar{
  position:sticky;
  top:0;
  z-index:50;
  background:rgba(255,255,255,.88);
  backdrop-filter:saturate(140%) blur(10px);
  border-bottom:1px solid var(--line);
}

.topbar__inner{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
  padding:12px 14px 8px;
  max-width:1200px;
  margin:0 auto;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:220px;
}
.brand__mark{
  width:44px; height:44px;
  display:grid; place-items:center;
  border-radius:14px;
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  color:white;
  font-size:22px;
  box-shadow: 0 10px 20px rgba(37,99,235,.20);
}
.brand__title{font-weight:800; letter-spacing:.2px}
.brand__subtitle{font-size:12px; color:var(--muted); margin-top:2px}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:flex-end;
  align-items:flex-start;
}

.control{
  border:1px solid var(--line);
  border-radius:14px;
  padding:8px 10px;
  background:rgba(255,255,255,.85);
}
.control__label{
  font-size:11px;
  color:var(--muted);
  margin-bottom:6px;
}

.seg{
  display:flex;
  gap:6px;
}
.seg__btn{
  height:36px;
  padding:0 10px;
  border-radius:12px;
  border:1px solid var(--line);
  background:white;
  color:var(--ink);
  cursor:pointer;
  font-weight:650;
}
.seg__btn--solo{min-width:140px}
.seg__btn[aria-pressed="true"]{
  border-color:rgba(37,99,235,.35);
  background:rgba(37,99,235,.10);
}

.scorepill{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px 12px;
  background:rgba(255,255,255,.85);
  min-width:180px;
}
.scorepill__row{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
}
.scorepill__label{color:var(--muted)}
.scorepill__value{font-weight:800}
.scorepill__dot{color:var(--muted)}
.scorepill__save{
  margin-top:6px;
  font-size:12px;
  color:var(--ok);
}

.tabs{
  display:flex;
  gap:8px;
  padding:10px 14px 12px;
  max-width:1200px;
  margin:0 auto;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}
.tab{
  height:40px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background:white;
  cursor:pointer;
  font-weight:700;
  white-space:nowrap;
}

.wrap{
  max-width:1200px;
  margin:0 auto;
  padding:18px 14px 60px;
}

.hero h1{margin:10px 0 8px}
.lead{
  color:#334155;
  font-size:15.5px;
  line-height:1.55;
  margin:0 0 12px;
}
.note{
  border:1px dashed rgba(37,99,235,.35);
  background:rgba(37,99,235,.06);
  border-radius:16px;
  padding:12px 12px;
  color:#1f2a44;
}
.hero__actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:12px 0 14px;
}

.section{margin-top:22px}
.section__head h2{margin:0 0 6px}
.muted{color:var(--muted); margin:0}

.grid{
  display:grid;
  gap:14px;
}
.grid--2{grid-template-columns:repeat(2, minmax(0, 1fr));}
.grid--3{grid-template-columns:repeat(3, minmax(0, 1fr));}

@media (max-width: 980px){
  .topbar__inner{align-items:flex-start; flex-direction:column}
  .controls{justify-content:flex-start}
  .grid--2,.grid--3{grid-template-columns:1fr}
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
}
.card h3{margin:0 0 10px}

.bullets{
  margin:10px 0 0;
  padding-left:18px;
  line-height:1.55;
}
.frhelp{
  margin-top:10px;
  padding-top:10px;
  border-top:1px dashed var(--line);
  color:#475569;
  display:none;
}
body.fr-on .frhelp{display:block}

.row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:10px;
}
.row--wrap{flex-wrap:wrap}

.pill{
  display:inline-flex;
  align-items:center;
  padding:8px 10px;
  border-radius:999px;
  background:rgba(14,165,233,.10);
  border:1px solid rgba(14,165,233,.22);
  font-weight:750;
}

.btn{
  height:var(--touch);
  padding:0 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:white;
  cursor:pointer;
  font-weight:750;
}
.btn--primary{
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  color:white;
  border-color:transparent;
}
.btn--small{height:38px; padding:0 12px; border-radius:12px}

.iconbtn{
  width:40px;
  height:40px;
  border-radius:12px;
  border:1px solid var(--line);
  background:white;
  cursor:pointer;
}

.select,.input{
  height:var(--touch);
  border-radius:14px;
  border:1px solid var(--line);
  padding:0 12px;
  background:white;
  width:100%;
  font-size:14px;
}
.mini{display:grid; gap:6px}
.mini__label{font-size:12px; color:var(--muted)}
.pathResult{
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:var(--soft);
  min-height:60px;
}

.phrasebox{display:grid; gap:10px}
.phrase{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border:1px solid var(--line);
  border-radius:14px;
  background:rgba(255,255,255,.65);
}

.accordion{
  display:grid;
  gap:10px;
  margin-top:12px;
}
.acc{
  border:1px solid var(--line);
  border-radius:16px;
  background:white;
  overflow:hidden;
}
.acc__btn{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:12px 12px;
  cursor:pointer;
  background:white;
  border:0;
  text-align:left;
}
.acc__title{font-weight:850}
.acc__meta{color:var(--muted); font-size:12px}
.acc__panel{
  display:none;
  border-top:1px solid var(--line);
  padding:10px 12px 12px;
}
.acc.is-open .acc__panel{display:block}

.task{
  display:flex;
  align-items:flex-start;
  gap:10px;
  padding:10px 10px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(241,245,249,.55);
  margin-top:10px;
}
.task input{
  width:22px; height:22px;
  margin-top:2px;
}
.task__text{line-height:1.45}
.task__en{font-weight:700}
.task__fr{color:#475569; margin-top:4px}

.flashwrap{
  display:grid;
  grid-template-columns:auto 1fr auto;
  gap:12px;
  align-items:center;
  margin-top:12px;
}
.flash{
  border-radius:22px;
  border:1px solid var(--line);
  background:white;
  box-shadow:var(--shadow);
  padding:14px;
  min-height:240px;
  outline:none;
}
.flash:focus{box-shadow:0 0 0 4px rgba(37,99,235,.14), var(--shadow)}

.flash__inner{position:relative}
.flash__face{display:block}
.flash__front{display:block}
.flash__back{display:none}

.flash.is-flipped .flash__front{display:none}
.flash.is-flipped .flash__back{display:block}

.flash__top{display:flex; gap:12px; align-items:center}
.flash__icon{
  width:46px; height:46px;
  border-radius:16px;
  display:grid; place-items:center;
  background:rgba(37,99,235,.10);
  border:1px solid rgba(37,99,235,.18);
  font-size:22px;
}
.flash__title{font-size:20px; font-weight:900}
.flash__hint{font-size:12px; color:var(--muted); margin-top:4px}

.flash__backTitle{
  font-weight:900;
  margin-bottom:6px;
}
.flash__text{line-height:1.55}
.flash__example{
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px dashed var(--line);
  background:var(--soft);
}
.flash__meta{
  margin-top:12px;
  color:var(--muted);
  font-size:12px;
  text-align:center;
}

.examples{display:grid; gap:10px}
.ex{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(241,245,249,.55);
}

.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:10px;
}
.chip{
  border:1px solid var(--line);
  background:white;
  border-radius:999px;
  padding:10px 12px;
  font-weight:750;
  cursor:pointer;
  min-height:40px;
}

.feedback{
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:var(--soft);
  min-height:44px;
}
.feedback.ok{border-color:rgba(22,163,74,.25); background:rgba(22,163,74,.08)}
.feedback.bad{border-color:rgba(220,38,38,.25); background:rgba(220,38,38,.08)}

.match{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.match__title{font-weight:900; margin-bottom:8px}
.match__list{display:grid; gap:8px}
.matchItem{
  border:1px solid var(--line);
  background:white;
  border-radius:14px;
  padding:10px 12px;
  cursor:pointer;
  min-height:44px;
  font-weight:750;
}
.matchItem.selected{outline:3px solid rgba(14,165,233,.25)}
.matchItem.matched{
  border-color:rgba(22,163,74,.28);
  background:rgba(22,163,74,.08);
  cursor:default;
}
.matchItem.wrong{
  border-color:rgba(220,38,38,.25);
  background:rgba(220,38,38,.08);
}

.builder{
  margin-top:10px;
}
.builder__prompt{
  font-weight:850;
  margin-bottom:10px;
}
.builder__bank, .builder__answer{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  padding:12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:white;
  min-height:62px;
}
.builder__bank{background:rgba(241,245,249,.55)}
.word{
  border:1px solid var(--line);
  border-radius:999px;
  padding:10px 12px;
  font-weight:800;
  background:white;
  cursor:pointer;
  min-height:40px;
}
.word.used{opacity:.45; cursor:default}
.word.inAnswer{border-color:rgba(37,99,235,.35); background:rgba(37,99,235,.08)}

.formgrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:10px;
}
.field span{display:block; font-size:12px; color:var(--muted); margin-bottom:6px}
.field--full{grid-column:1 / -1}

.dialogue{
  white-space:pre-wrap;
  line-height:1.55;
  padding:12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:rgba(241,245,249,.55);
  min-height:260px;
}

.issueOut{
  line-height:1.6;
  white-space:pre-wrap;
}

.links{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:10px;
}
.links a{
  display:inline-flex;
  align-items:center;
  min-height:40px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background:white;
  text-decoration:none;
  font-weight:750;
}

.footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-top:14px;
  color:var(--muted);
  font-size:12px;
}
