<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Routine ‚Äì Student Lesson</title>
  <style>
    body {
      margin: 0;
      background: #f5f5f5;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #111827;
    }

    .routine-lesson {
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
      box-sizing: border-box;

      font-size: 16px;
      line-height: 1.5;
      background: transparent;
    }

    .routine-lesson h1,
    .routine-lesson h2,
    .routine-lesson h3 {
      margin-top: 0;
      text-align: center;
    }

    .routine-lesson h1 {
      font-size: 1.8em;
      margin-bottom: 12px;
    }

    .routine-lesson h2 {
      font-size: 1.3em;
      margin-bottom: 8px;
    }

    .routine-lesson h3 {
      font-size: 1.1em;
      margin-top: 16px;
      margin-bottom: 6px;
    }

    .routine-section {
      margin-bottom: 28px;
      padding: 16px 18px;
      border-radius: 14px;
      background: #ffffff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      border: none;
    }

    .routine-section + .routine-section {
      margin-top: 18px;
    }

    .routine-tagline {
      font-size: 0.9em;
      color: #555;
    }

    .routine-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .routine-card {
      flex: 1 1 220px;
      padding: 10px 12px;
      border-radius: 10px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }

    .routine-card h4 {
      margin: 0 0 4px;
      font-size: 1em;
    }

    .routine-card ul {
      margin: 0;
      padding-left: 18px;
      font-size: 0.95em;
    }

    .routine-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95em;
      margin-top: 8px;
    }

    .routine-table th,
    .routine-table td {
      border: 1px solid #e5e7eb;
      padding: 6px 8px;
      text-align: left;
    }

    .routine-table th {
      background: #eef2ff;
    }

    .quiz-container {
      margin-top: 8px;
    }

    .routine-question {
      margin-bottom: 12px;
      padding: 10px 10px 8px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
    }

    .routine-question p {
      margin: 0 0 6px;
    }

    .routine-answers {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }

    .routine-answers button {
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 0.95em;
      cursor: pointer;

      border: 1px solid #d1d5db;
      background: #f3f4f6;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
    }

    .routine-answers button:hover {
      transform: translateY(-1px);
      box-shadow: 0 1px 4px rgba(0,0,0,0.12);
    }

    .routine-answers button.correct {
      background: #dcfce7;
      border-color: #22c55e;
    }

    .routine-answers button.incorrect {
      background: #fee2e2;
      border-color: #ef4444;
    }

    .routine-answers button.chosen {
      box-shadow: 0 0 0 2px rgba(59,130,246,0.25);
    }

    .routine-feedback {
      font-size: 0.85em;
      min-height: 16px;
    }

    .routine-feedback.correct {
      color: #15803d;
    }

    .routine-feedback.incorrect {
      color: #b91c1c;
    }

    .routine-note {
      font-size: 0.9em;
      color: #6b7280;
      margin-top: 4px;
    }

    .routine-reading {
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      background: #ffffff;
    }

    .routine-reading strong.grammar {
      background: #fff7ed;
      padding: 0 2px;
      border-radius: 4px;
    }

    .routine-score-box {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #c7d2fe;
      background: #eef2ff;
      font-size: 0.95em;
    }

    .routine-score-btn,
    .routine-builder-btn {
      margin-top: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      background: #4f46e5;
      color: #fff;
      font-size: 0.95em;
      cursor: pointer;
    }

    .routine-score-btn:hover,
    .routine-builder-btn:hover {
      filter: brightness(1.05);
    }

    .routine-builder-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-bottom: 10px;
      font-size: 0.95em;
    }

    .routine-builder-controls label {
      display: block;
    }

    .routine-builder-controls select,
    .routine-builder-controls input {
      width: 100%;
      margin-top: 3px;
      padding: 4px;
      font-size: 0.95em;
    }

    .routine-builder-checkboxes {
      font-size: 0.95em;
      margin-top: 6px;
    }

    .routine-builder-checkboxes label {
      display: block;
    }

    .routine-builder-output {
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 8px 10px;
      min-height: 60px;
      white-space: pre-wrap;
      background: #ffffff;
    }

    .routine-level-box {
      margin-top: 6px;
      font-size: 0.95em;
    }

    .profile-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      align-items: end;
      margin-top: 10px;
    }

    .profile-row label {
      font-size: 0.95em;
      display: block;
    }

    .profile-row input,
    .profile-row select {
      width: 100%;
      margin-top: 4px;
      padding: 4px;
      font-size: 0.95em;
    }

    .profile-pronouns {
      margin-top: 8px;
      font-size: 0.9em;
      color: #374151;
    }

    @media (max-width: 640px) {
      .routine-lesson {
        padding: 12px;
      }
      .routine-section {
        padding: 12px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="routine-lesson">
    <!-- INTRO -->
    <section class="routine-section">
      <h1>Daily Routine ‚Äî Present Simple &amp; Continuous</h1>
      <p class="routine-tagline">
        Goal: talk about your typical day and special plans using the correct tenses, time expressions,
        dates, adverbs, adjectives and sequencing.
      </p>
      <ul>
        <li>Vocabulary for home, work and free-time activities.</li>
        <li>Present simple vs present continuous.</li>
        <li>Telling the time &amp; times of day (morning, afternoon, evening, night).</li>
        <li>Writing and saying dates (US vs UK/EU format).</li>
        <li>Reading comprehension and paragraph builder with level indication.</li>
      </ul>
    </section>

    <!-- STUDENT PROFILE -->
    <section class="routine-section">
      <h2>Student profile</h2>
      <p class="routine-note">
        Enter the learner's name and choose pronouns. The lesson text will adapt to this student.
      </p>
      <div class="profile-row">
        <div>
          <label>
            Student name
            <input id="student-name-input" type="text" value="Thomas" />
          </label>
        </div>
        <div>
          <label>
            Pronouns
            <select id="student-pronoun-select">
              <option value="he">he / him / his</option>
              <option value="she">she / her / her</option>
              <option value="they">they / them / their</option>
            </select>
          </label>
        </div>
        <div>
          <button type="button" class="routine-builder-btn" id="student-apply-btn">Apply to lesson</button>
        </div>
      </div>
      <div class="profile-pronouns" id="student-pronoun-display">
        Subject: he ¬∑ Object: him ¬∑ Possessive adjective: his
      </div>
    </section>

    <!-- 1. VOCABULARY: DAILY ROUTINE -->
    <section class="routine-section">
      <h2>1. Daily Routine Vocabulary</h2>

      <div class="routine-flex">
        <div class="routine-card">
          <h4>üè† At home</h4>
          <ul>
            <li>wake up, get up</li>
            <li>take a shower, get dressed</li>
            <li>have breakfast / lunch / dinner</li>
            <li>cook, clean, do the dishes</li>
            <li>do the laundry, make the bed</li>
            <li>relax on the sofa, watch TV</li>
          </ul>
        </div>

        <div class="routine-card">
          <h4>üíº At work</h4>
          <ul>
            <li>go to work, commute</li>
            <li>start work, finish work</li>
            <li>have a meeting, send emails</li>
            <li>work on a project</li>
            <li>take a break, have a coffee</li>
          </ul>
        </div>

        <div class="routine-card">
          <h4>üéØ Free time &amp; activities</h4>
          <ul>
            <li>go for a walk, go running</li>
            <li>do sport, go to the gym</li>
            <li>read a book, play video games</li>
            <li>meet friends, go out for dinner</li>
            <li>study English, take an online class</li>
          </ul>
        </div>

        <div class="routine-card">
          <h4>üïí Times of day</h4>
          <ul>
            <li><strong>in the morning</strong> (6:00‚Äì12:00)</li>
            <li><strong>in the afternoon</strong> (12:00‚Äì18:00)</li>
            <li><strong>in the evening</strong> (18:00‚Äì22:00)</li>
            <li><strong>at night</strong> (late, when it‚Äôs dark)</li>
          </ul>
        </div>
      </div>

      <p><strong>Adverbs of frequency:</strong> always, usually, often, sometimes, rarely, never.</p>

      <!-- QUIZ 1: VOCABULARY -->
      <div class="quiz-container">
        <h3>Quiz 1 ‚Äî Daily Routine &amp; Vocabulary</h3>
        <p class="routine-note">Choose the best answer.</p>

        <div class="routine-question">
          <p>1. In the morning <span data-role="student-name">Thomas</span> usually ________ at 6:30.</p>
          <div class="routine-answers">
            <button data-correct="false">take a break</button>
            <button data-correct="true">wake up</button>
            <button data-correct="false">go to bed</button>
            <button data-correct="false">finish work</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>2. After breakfast <span data-role="student-name">Thomas</span> ________ and then goes to work.</p>
          <div class="routine-answers">
            <button data-correct="false">does the laundry</button>
            <button data-correct="false">relaxes on the sofa</button>
            <button data-correct="true">gets dressed</button>
            <button data-correct="false">goes to bed</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>3. During the day at work, <span data-role="student-name">Thomas</span> ________ and ________.</p>
          <div class="routine-answers">
            <button data-correct="false">cooks dinner / does the dishes</button>
            <button data-correct="false">makes the bed / watches TV</button>
            <button data-correct="true">sends emails / has meetings</button>
            <button data-correct="false">goes to bed / wakes up</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>4. In the evening <span data-role="student-name">Thomas</span> likes to ________ with the family.</p>
          <div class="routine-answers">
            <button data-correct="false">start work</button>
            <button data-correct="true">have dinner</button>
            <button data-correct="false">get up</button>
            <button data-correct="false">take a shower</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>5. ‚ÄúI <strong>often</strong> go to the gym in the ________.‚Äù</p>
          <div class="routine-answers">
            <button data-correct="false">morning</button>
            <button data-correct="false">night</button>
            <button data-correct="true">evening</button>
            <button data-correct="false">midnight</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>6. Which sentence is <strong>most natural</strong>?</p>
          <div class="routine-answers">
            <button data-correct="false">I do a shower and after I dress me.</button>
            <button data-correct="true">I take a shower and then I get dressed.</button>
            <button data-correct="false">I make a shower and I dress.</button>
            <button data-correct="false">I shower me and after dress.</button>
          </div>
          <div class="routine-feedback"></div>
        </div>
      </div>
    </section>

    <!-- 2. PRESENT SIMPLE vs CONTINUOUS -->
    <section class="routine-section">
      <h2>2. Present Simple vs Present Continuous</h2>

      <h3>2.1 Form &amp; Use</h3>
      <table class="routine-table">
        <tr>
          <th></th>
          <th>Present simple</th>
          <th>Present continuous</th>
        </tr>
        <tr>
          <td>Use</td>
          <td>Routine, habits, facts</td>
          <td>Now / this week / temporary situations</td>
        </tr>
        <tr>
          <td>Example</td>
          <td><span data-role="student-name">Thomas</span> <strong>starts</strong> work at 8.</td>
          <td><span data-role="student-name">Thomas</span> <strong>is starting</strong> a new project this week.</td>
        </tr>
      </table>

      <p><strong>Present simple:</strong> subject + base verb (+s)</p>
      <ul>
        <li>I <strong>work</strong> from home.</li>
        <li><span data-role="student-name">Thomas</span> <strong>gets</strong> up at 7:00.</li>
      </ul>

      <p><strong>Present continuous:</strong> subject + am/is/are + verb + -ing</p>
      <ul>
        <li>I <strong>am working</strong> from home today.</li>
        <li><span data-role="student-name">Thomas</span> <strong>is having</strong> dinner now.</li>
      </ul>

      <!-- QUIZ 2: TENSES -->
      <div class="quiz-container">
        <h3>Quiz 2 ‚Äî Present Simple or Present Continuous?</h3>

        <div class="routine-question">
          <p>1. <span data-role="student-name">Thomas</span> usually ________ breakfast at 7:15.</p>
          <div class="routine-answers">
            <button data-correct="true">has</button>
            <button data-correct="false">is having</button>
            <button data-correct="false">have</button>
            <button data-correct="false">having</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>2. Right now <span data-role="pronoun-subj-lower">he</span> ________ coffee with a colleague.</p>
          <div class="routine-answers">
            <button data-correct="false">drinks</button>
            <button data-correct="true">is drinking</button>
            <button data-correct="false">drink</button>
            <button data-correct="false">is drink</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>3. <span data-role="pronoun-subj-cap">He</span> ________ English twice a week.</p>
          <div class="routine-answers">
            <button data-correct="true">studies</button>
            <button data-correct="false">is studying now twice a week</button>
            <button data-correct="false">is study</button>
            <button data-correct="false">study</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>4. This week <span data-role="student-name">Thomas</span> ________ late because of a big project.</p>
          <div class="routine-answers">
            <button data-correct="false">works</button>
            <button data-correct="true">is working</button>
            <button data-correct="false">work</button>
            <button data-correct="false">is work</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>5. On Mondays <span data-role="student-name">Thomas</span> ________ home at 6 p.m.</p>
          <div class="routine-answers">
            <button data-correct="true">gets</button>
            <button data-correct="false">is getting</button>
            <button data-correct="false">get</button>
            <button data-correct="false">are getting</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>6. Listen! The children ________ in the garden.</p>
          <div class="routine-answers">
            <button data-correct="false">play</button>
            <button data-correct="true">are playing</button>
            <button data-correct="false">plays</button>
            <button data-correct="false">is play</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>7. <span data-role="pronoun-subj-cap">He</span> ________ to work by car, but today <span data-role="pronoun-subj-lower">he</span> ________ by train.</p>
          <div class="routine-answers">
            <button data-correct="false">is going / goes</button>
            <button data-correct="true">goes / is going</button>
            <button data-correct="false">go / goes</button>
            <button data-correct="false">is go / is going</button>
          </div>
          <div class="routine-feedback"></div>
        </div>
      </div>
    </section>

    <!-- 3. TELLING TIME & TIMES OF DAY -->
    <section class="routine-section">
      <h2>3. Telling the Time &amp; Times of Day</h2>

      <h3>3.1 Saying the time</h3>
      <ul>
        <li>7:00 ‚Üí <strong>seven o‚Äôclock</strong></li>
        <li>7:15 ‚Üí <strong>a quarter past seven</strong></li>
        <li>7:30 ‚Üí <strong>half past seven</strong></li>
        <li>7:45 ‚Üí <strong>a quarter to eight</strong></li>
        <li>7:05 ‚Üí <strong>seven oh five</strong> / <strong>five past seven</strong></li>
      </ul>

      <p>
        With the 24-hour clock we often say:
        <br><em>7:00 ‚Üí seven a.m.</em>, <em>19:00 ‚Üí seven p.m.</em>
      </p>

      <p>
        We usually say:
        <br>üëâ <strong>in the morning</strong>, <strong>in the afternoon</strong>,
        <strong>in the evening</strong>, but <strong>at night</strong>.
      </p>

      <!-- QUIZ 3: TIME -->
      <div class="quiz-container">
        <h3>Quiz 3 ‚Äî Time &amp; Time of Day</h3>

        <div class="routine-question">
          <p>1. 6:30 ‚Üí</p>
          <div class="routine-answers">
            <button data-correct="false">six o‚Äôclock</button>
            <button data-correct="true">half past six</button>
            <button data-correct="false">a quarter to six</button>
            <button data-correct="false">six and a half</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>2. 19:15 ‚Üí</p>
          <div class="routine-answers">
            <button data-correct="false">a quarter past nine</button>
            <button data-correct="false">half past seven</button>
            <button data-correct="true">a quarter past seven p.m.</button>
            <button data-correct="false">seven quarter</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>3. ‚ÄúI usually have lunch ________ 12:30 ________ the afternoon.‚Äù</p>
          <div class="routine-answers">
            <button data-correct="false">in / at</button>
            <button data-correct="true">at / in</button>
            <button data-correct="false">on / at</button>
            <button data-correct="false">at / at</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>4. 22:00 is usually called:</p>
          <div class="routine-answers">
            <button data-correct="false">ten a.m.</button>
            <button data-correct="false">ten in the morning</button>
            <button data-correct="true">ten p.m.</button>
            <button data-correct="false">ten at afternoon</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>5. Choose the most natural sentence:</p>
          <div class="routine-answers">
            <button data-correct="false">I go to bed at night at 23 o‚Äôclock.</button>
            <button data-correct="true">I go to bed at 11 p.m. at night.</button>
            <button data-correct="false">I go to bed in 23.</button>
            <button data-correct="false">I go to bed on 11 p.m.</button>
          </div>
          <div class="routine-feedback"></div>
        </div>
      </div>
    </section>

    <!-- 4. WRITING & SAYING DATES -->
    <section class="routine-section">
      <h2>4. Writing &amp; Saying Dates</h2>

      <h3>4.1 Writing dates</h3>
      <p><strong>US style:</strong> month / day / year ‚Üí 04/05/2025 = April 5, 2025</p>
      <p><strong>UK / European style:</strong> day / month / year ‚Üí 04/05/2025 = 4 May 2025</p>

      <p><strong>Ordinals in spoken English:</strong></p>
      <ul>
        <li>1 ‚Üí <strong>first</strong> (1st)</li>
        <li>2 ‚Üí <strong>second</strong> (2nd)</li>
        <li>3 ‚Üí <strong>third</strong> (3rd)</li>
        <li>4 ‚Üí <strong>fourth</strong> (4th)</li>
        <li>5 ‚Üí <strong>fifth</strong> (5th)</li>
        <li>21 ‚Üí <strong>twenty-first</strong> (21st)</li>
        <li>30 ‚Üí <strong>thirtieth</strong> (30th)</li>
      </ul>

      <p><strong>Saying the date:</strong></p>
      <ul>
        <li>April 5, 2025 ‚Üí <em>‚ÄúApril fifth twenty twenty-five‚Äù</em></li>
        <li>5 April 2025 ‚Üí <em>‚Äúthe fifth of April twenty twenty-five‚Äù</em></li>
      </ul>

      <!-- QUIZ 4: DATES -->
      <div class="quiz-container">
        <h3>Quiz 4 ‚Äî Dates &amp; Pronunciation</h3>

        <div class="routine-question">
          <p>1. In US style, ‚Äúthe fifth of June 2025‚Äù ‚Üí</p>
          <div class="routine-answers">
            <button data-correct="false">05/06/25</button>
            <button data-correct="true">06/05/2025</button>
            <button data-correct="false">25/06/05</button>
            <button data-correct="false">05/25/06</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>2. In UK / EU style, ‚ÄúMarch 12, 2025‚Äù ‚Üí</p>
          <div class="routine-answers">
            <button data-correct="false">12/03/25 (US)</button>
            <button data-correct="true">12/03/2025</button>
            <button data-correct="false">03/12/2025 (US)</button>
            <button data-correct="false">03/25/2012</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>3. 21st October 2025 is said:</p>
          <div class="routine-answers">
            <button data-correct="false">the twenty-one of October</button>
            <button data-correct="false">twenty-one October</button>
            <button data-correct="true">the twenty-first of October</button>
            <button data-correct="false">the twenty-one October</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>4. How do we usually write the date in France (official documents)?</p>
          <div class="routine-answers">
            <button data-correct="true">day / month / year</button>
            <button data-correct="false">month / day / year</button>
            <button data-correct="false">year / month / day</button>
            <button data-correct="false">year / day / month</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>5. ‚Äú01/02/2025‚Äù in US English normally means:</p>
          <div class="routine-answers">
            <button data-correct="true">January 2, 2025</button>
            <button data-correct="false">1 February 2025</button>
            <button data-correct="false">2 January 2025</button>
            <button data-correct="false">It always means 1 February everywhere</button>
          </div>
          <div class="routine-feedback"></div>
        </div>
      </div>
    </section>

    <!-- 5. READING COMPREHENSION -->
    <section class="routine-section">
      <h2>5. Reading Comprehension ‚Äî Typical Day</h2>

      <div class="routine-reading">
        <p>
          <span data-role="student-name">Thomas</span> <strong class="grammar">usually wakes up</strong> at 6:45
          in the morning. <span data-role="student-name">Thomas</span> <strong class="grammar">gets up</strong>,
          <strong class="grammar">takes</strong> a quick shower and <strong class="grammar">has</strong> breakfast
          with their family. <span data-role="student-name">Thomas</span> often
          <strong class="grammar">drinks</strong> a coffee and <strong class="grammar">reads</strong> the news
          on their phone. At about 7:45 <span data-role="student-name">Thomas</span>
          <strong class="grammar">leaves</strong> home and <strong class="grammar">drives</strong> to work.
        </p>
        <p>
          <span data-role="student-name">Thomas</span> <strong class="grammar">starts</strong> work at 8:30. Most days
          <span data-role="student-name">Thomas</span> <strong class="grammar">works</strong> in the office,
          but this week <span data-role="student-name">Thomas</span> <strong class="grammar">is working</strong>
          from home because <span data-role="student-name">Thomas</span>
          <strong class="grammar">is preparing</strong> an important presentation.
          <span data-role="student-name">Thomas</span> <strong class="grammar">has</strong> a short coffee break
          at 10:30 and <strong class="grammar">usually has</strong> lunch at 12:30 in the canteen.
        </p>
        <p>
          In the afternoon <span data-role="student-name">Thomas</span>
          <strong class="grammar">answers</strong> emails, <strong class="grammar">attends</strong> meetings
          and <strong class="grammar">works</strong> on different projects. Today
          <span data-role="student-name">Thomas</span> <strong class="grammar">is meeting</strong> the manager
          to talk about the new schedule. <span data-role="student-name">Thomas</span>
          normally <strong class="grammar">finishes</strong> work at 5:30 and
          <strong class="grammar">gets home</strong> at about 6:00 p.m.
        </p>
        <p>
          In the evening <span data-role="student-name">Thomas</span> <strong class="grammar">has</strong> dinner
          with the family. Sometimes <span data-role="student-name">Thomas</span>
          <strong class="grammar">goes</strong> for a walk, but tonight
          <span data-role="student-name">Thomas</span> <strong class="grammar">is staying</strong> at home because
          <span data-role="student-name">Thomas</span> <strong class="grammar">is studying</strong> English.
          <span data-role="student-name">Thomas</span> often <strong class="grammar">goes to bed</strong> at 11:00 p.m.,
          but when <span data-role="student-name">Thomas</span> <strong class="grammar">is very tired</strong>,
          <span data-role="student-name">Thomas</span> <strong class="grammar">falls asleep</strong> earlier.
        </p>
      </div>

      <!-- QUIZ 5: READING QCM -->
      <div class="quiz-container">
        <h3>Quiz 5 ‚Äî QCM Reading</h3>

        <div class="routine-question">
          <p>1. What time does <span data-role="student-name">Thomas</span> usually wake up?</p>
          <div class="routine-answers">
            <button data-correct="false">6:15</button>
            <button data-correct="true">6:45</button>
            <button data-correct="false">7:45</button>
            <button data-correct="false">8:30</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>2. Where does <span data-role="student-name">Thomas</span> normally have lunch?</p>
          <div class="routine-answers">
            <button data-correct="false">At home</button>
            <button data-correct="true">In the canteen</button>
            <button data-correct="false">In the car</button>
            <button data-correct="false">Never has lunch</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>3. Why is <span data-role="student-name">Thomas</span> working from home this week?</p>
          <div class="routine-answers">
            <button data-correct="false">Because of sickness</button>
            <button data-correct="false">Because the office is closed</button>
            <button data-correct="true">Because of an important presentation</button>
            <button data-correct="false">Because of holidays</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>4. What does <span data-role="student-name">Thomas</span> often do in the evening?</p>
          <div class="routine-answers">
            <button data-correct="false">Always works late</button>
            <button data-correct="false">Never eats</button>
            <button data-correct="true">Has dinner with the family</button>
            <button data-correct="false">Goes to bed at 8 p.m.</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>5. What is <span data-role="student-name">Thomas</span> doing tonight?</p>
          <div class="routine-answers">
            <button data-correct="false">Going to the cinema</button>
            <button data-correct="true">Staying at home and studying English</button>
            <button data-correct="false">Working in the office</button>
            <button data-correct="false">Travelling abroad</button>
          </div>
          <div class="routine-feedback"></div>
        </div>

        <div class="routine-question">
          <p>6. When does <span data-role="student-name">Thomas</span> usually go to bed?</p>
          <div class="routine-answers">
            <button data-correct="false">9:00 p.m.</button>
            <button data-correct="false">10:00 p.m.</button>
            <button data-correct="true">11:00 p.m.</button>
            <button data-correct="false">Midnight</button>
          </div>
          <div class="routine-feedback"></div>
        </div>
      </div>
    </section>

    <!-- 6. PARAGRAPH BUILDER + LISTEN / PAUSE / RESET -->
    <section class="routine-section">
      <h2>6. Paragraph Builder ‚Äî Describe Your Day</h2>
      <p class="routine-note">
        Use the options below to build a paragraph. The system will suggest an approximate level (A1‚ÄìB1+).
        Then you can <strong>listen</strong>, <strong>pause</strong>, or <strong>reset</strong>.
      </p>

      <div class="routine-builder-controls" id="routine-builder-controls">
        <div>
          <label>
            Subject
            <select id="rb-subject">
              <option value="I">I</option>
              <option value="student" id="rb-subject-student">Thomas</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            Typical wake-up time
            <select id="rb-wakeup">
              <option value="6:30">6:30</option>
              <option value="7:00">7:00</option>
              <option value="7:30">7:30</option>
              <option value="8:00">8:00</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            Adverb of frequency
            <select id="rb-frequency">
              <option value="usually">usually</option>
              <option value="always">always</option>
              <option value="often">often</option>
              <option value="sometimes">sometimes</option>
              <option value="rarely">rarely</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            Work start time
            <select id="rb-workstart">
              <option value="8:00">8:00</option>
              <option value="8:30">8:30</option>
              <option value="9:00">9:00</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            Work location
            <select id="rb-workplace">
              <option value="in an office">in an office</option>
              <option value="from home">from home</option>
              <option value="in a workshop">in a workshop</option>
              <option value="in different places">in different places</option>
            </select>
          </label>
        </div>

        <div>
          <label>
            Evening focus (today)
            <select id="rb-evening">
              <option value="relaxing and watching TV">relaxing and watching TV</option>
              <option value="studying English">studying English</option>
              <option value="meeting friends">meeting friends</option>
              <option value="working on a special project">working on a special project</option>
            </select>
          </label>
        </div>
      </div>

      <div class="routine-builder-checkboxes">
        <strong>Include activities (check some):</strong><br>
        <label><input type="checkbox" class="rb-activity" value="have breakfast with my family"> have breakfast with my family</label>
        <label><input type="checkbox" class="rb-activity" value="drink a coffee and read the news"> drink a coffee and read the news</label>
        <label><input type="checkbox" class="rb-activity" value="drive to work"> drive to work</label>
        <label><input type="checkbox" class="rb-activity" value="take a short coffee break"> take a short coffee break</label>
        <label><input type="checkbox" class="rb-activity" value="go for a walk in the evening"> go for a walk in the evening</label>
        <label><input type="checkbox" class="rb-activity" value="do some sport during the week"> do some sport during the week</label>
      </div>

      <div class="routine-builder-checkboxes" style="margin-top:8px;">
        <strong>Extra complexity:</strong><br>
        <label><input type="checkbox" id="rb-use-continuous" value="1"> Add a present continuous sentence about this week</label>
        <label><input type="checkbox" id="rb-use-adverbs" value="1"> Add more adverbs (for example: right now, today)</label>
        <label><input type="checkbox" id="rb-use-sequencing" value="1"> Add sequencing words (first, then, after that, finally)</label>
      </div>

      <button type="button" class="routine-builder-btn" id="rb-build">Build my paragraph</button>
      <button type="button" class="routine-builder-btn" id="rb-listen">‚ñ∂ Listen</button>
      <button type="button" class="routine-builder-btn" id="rb-pause">‚è∏ Pause</button>
      <button type="button" class="routine-builder-btn" id="rb-reset">Reset</button>

      <div class="routine-builder-output" id="rb-output"></div>
      <div class="routine-level-box" id="rb-level"></div>
    </section>

    <!-- 7. FINAL SCORE & RESET QUIZZES -->
    <section class="routine-section">
      <h2>7. Your Score for This Lesson</h2>
      <p>Click the button to calculate your total result for all quizzes on this page.</p>

      <div class="routine-score-box" id="routine-score-result">
        <p>No answers counted yet. Try some questions, then click ‚ÄúCalculate my score‚Äù.</p>
      </div>
      <button class="routine-score-btn" id="routine-calc-score">Calculate my score</button>
      <button class="routine-score-btn" id="routine-reset-quizzes">Reset all quiz answers</button>

      <p class="routine-note">
        Reminder: the ‚Äúlevel‚Äù for your paragraph is just a simple pedagogical indicator,
        not an official CEFR certification.
      </p>
    </section>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const lesson = document.querySelector('.routine-lesson');
      if (!lesson) return;

      /* ====== STUDENT PROFILE (NAME + PRONOUNS) ====== */
      const profile = {
        name: 'Thomas',
        pronounKey: 'he', // 'he' | 'she' | 'they'
      };

      const pronounSets = {
        he:  { subj: 'he',   subjCap: 'He',   obj: 'him',  possAdj: 'his' },
        she: { subj: 'she',  subjCap: 'She',  obj: 'her',  possAdj: 'her' },
        they:{ subj: 'they', subjCap: 'They', obj: 'them', possAdj: 'their' }
      };

      const nameInput        = document.getElementById('student-name-input');
      const pronounSelect    = document.getElementById('student-pronoun-select');
      const applyBtn         = document.getElementById('student-apply-btn');
      const pronounDisplay   = document.getElementById('student-pronoun-display');
      const subjectStudentOp = document.getElementById('rb-subject-student');

      function updateNameInDOM() {
        const spans = lesson.querySelectorAll('[data-role="student-name"]');
        spans.forEach(span => {
          span.textContent = profile.name;
        });
        if (subjectStudentOp) {
          subjectStudentOp.textContent = profile.name;
        }
      }

      function updatePronounsInDOM() {
        const set = pronounSets[profile.pronounKey];
        if (!set) return;

        const lowerSpans = lesson.querySelectorAll('[data-role="pronoun-subj-lower"]');
        lowerSpans.forEach(span => {
          span.textContent = set.subj;
        });

        const capSpans = lesson.querySelectorAll('[data-role="pronoun-subj-cap"]');
        capSpans.forEach(span => {
          span.textContent = set.subjCap;
        });

        if (pronounDisplay) {
          pronounDisplay.textContent =
            'Subject: ' + set.subj +
            ' ¬∑ Object: ' + set.obj +
            ' ¬∑ Possessive adjective: ' + set.possAdj;
        }
      }

      if (applyBtn) {
        applyBtn.addEventListener('click', () => {
          if (nameInput && nameInput.value.trim()) {
            profile.name = nameInput.value.trim();
          }
          if (pronounSelect && pronounSelect.value) {
            profile.pronounKey = pronounSelect.value;
          }
          updateNameInDOM();
          updatePronounsInDOM();
        });
      }

      // Initial sync
      updateNameInDOM();
      updatePronounsInDOM();

      /* ====== QUIZ LOGIC (MCQ WITH FEEDBACK + SCORE) ====== */
      const questions = lesson.querySelectorAll('.routine-question');

      questions.forEach(question => {
        const buttons = question.querySelectorAll('.routine-answers button[data-correct]');
        const feedback = question.querySelector('.routine-feedback');

        buttons.forEach(btn => {
          btn.addEventListener('click', () => {
            // clear previous styles
            buttons.forEach(b => {
              b.classList.remove('correct', 'incorrect', 'chosen');
            });

            const isCorrect = btn.dataset.correct === 'true';
            btn.classList.add('chosen');

            if (isCorrect) {
              btn.classList.add('correct');
              question.dataset.score = '1';
              if (feedback) {
                feedback.textContent = '‚úÖ Correct!';
                feedback.classList.remove('incorrect');
                feedback.classList.add('correct');
              }
            } else {
              btn.classList.add('incorrect');
              question.dataset.score = '0';
              if (feedback) {
                feedback.textContent = '‚ùå Not quite. Try again.';
                feedback.classList.remove('correct');
                feedback.classList.add('incorrect');
              }
            }
          });
        });
      });

      const scoreBtn = document.getElementById('routine-calc-score');
      const scoreResult = document.getElementById('routine-score-result');
      const resetQuizzesBtn = document.getElementById('routine-reset-quizzes');

      if (scoreBtn && scoreResult) {
        scoreBtn.addEventListener('click', () => {
          let total = 0;
          let answered = 0;
          let correct = 0;

          questions.forEach(q => {
            total += 1;
            const val = q.dataset.score;
            if (val === '1' || val === '0') {
              answered += 1;
              if (val === '1') correct += 1;
            }
          });

          const percent = total ? Math.round((correct / total) * 100) : 0;
          let msg = '';
          if (percent >= 80) {
            msg = 'üåü Excellent! You‚Äôre controlling these structures very well.';
          } else if (percent >= 60) {
            msg = 'üëç Good job! Review the red questions and try again.';
          } else {
            msg = 'üß± Keep practicing. Go back to the grammar and vocabulary sections.';
          }

          scoreResult.innerHTML = `
            <p><strong>Questions answered:</strong> ${answered} / ${total}</p>
            <p><strong>Correct answers:</strong> ${correct} / ${total} (${percent}%)</p>
            <p>${msg}</p>
          `;
        });
      }

      if (resetQuizzesBtn && scoreResult) {
        resetQuizzesBtn.addEventListener('click', () => {
          questions.forEach(q => {
            delete q.dataset.score;
            const buttons = q.querySelectorAll('.routine-answers button');
            const feedback = q.querySelector('.routine-feedback');
            buttons.forEach(b => b.classList.remove('correct', 'incorrect', 'chosen'));
            if (feedback) {
              feedback.textContent = '';
              feedback.classList.remove('correct', 'incorrect');
            }
          });
          scoreResult.innerHTML = '<p>All quiz answers have been reset.</p>';
        });
      }

      /* ====== PARAGRAPH BUILDER + TTS (LISTEN / PAUSE / RESET) ====== */
      const rbSubject = document.getElementById('rb-subject');
      const rbWakeup = document.getElementById('rb-wakeup');
      const rbFrequency = document.getElementById('rb-frequency');
      const rbWorkstart = document.getElementById('rb-workstart');
      const rbWorkplace = document.getElementById('rb-workplace');
      const rbEvening = document.getElementById('rb-evening');
      const rbActivities = document.querySelectorAll('.rb-activity');
      const rbUseContinuous = document.getElementById('rb-use-continuous');
      const rbUseAdverbs = document.getElementById('rb-use-adverbs');
      const rbUseSequencing = document.getElementById('rb-use-sequencing');

      const rbBuildBtn = document.getElementById('rb-build');
      const rbListenBtn = document.getElementById('rb-listen');
      const rbPauseBtn = document.getElementById('rb-pause');
      const rbResetBtn = document.getElementById('rb-reset');
      const rbOutput = document.getElementById('rb-output');
      const rbLevel = document.getElementById('rb-level');

      let currentUtterance = null;

      function buildParagraph() {
        const subjectChoice = rbSubject ? rbSubject.value : 'I'; // 'I' or 'student'
        const isI = subjectChoice === 'I';
        const name = profile.name || 'the student';

        const wake = rbWakeup ? rbWakeup.value : '7:00';
        const freq = rbFrequency ? rbFrequency.value : 'usually';
        const workStart = rbWorkstart ? rbWorkstart.value : '8:30';
        const workplace = rbWorkplace ? rbWorkplace.value : 'in an office';
        const evening = rbEvening ? rbEvening.value : 'relaxing and watching TV';

        const selectedActivities = [];
        rbActivities.forEach(ch => {
          if (ch.checked) selectedActivities.push(ch.value);
        });

        const useCont = rbUseContinuous && rbUseContinuous.checked;
        const useAdv = rbUseAdverbs && rbUseAdverbs.checked;
        const useSeq = rbUseSequencing && rbUseSequencing.checked;

        let seqWords = [];
        if (useSeq) seqWords = ['First', 'Then', 'After that', 'Finally'];

        let sentences = [];
        let adverbCount = 0;
        let continuousCount = 0;
        let seqCount = 0;

        // Morning sentence
        let s1 = '';
        if (useSeq && seqWords[0]) {
          s1 += seqWords[0] + ', ';
          seqCount++;
        }
        if (isI) {
          s1 += 'I ' + freq + ' wake up at ' + wake + ' in the morning.';
        } else {
          s1 += name + ' ' + freq + ' wakes up at ' + wake + ' in the morning.';
        }
        adverbCount++;
        sentences.push(s1);

        // Activities
        if (selectedActivities.length > 0) {
          let s2 = '';
          if (useSeq && seqWords[1]) {
            s2 += seqWords[1] + ', ';
            seqCount++;
          }
          if (isI) {
            s2 += 'I usually ' + selectedActivities.join(', and ') + '.';
          } else {
            s2 += name + ' usually ' + selectedActivities.join(', and ') + '.';
          }
          adverbCount++;
          sentences.push(s2);
        }

        // Work sentence (present simple)
        let s3 = '';
        if (useSeq && seqWords[2]) {
          s3 += seqWords[2] + ', ';
          seqCount++;
        }
        if (isI) {
          s3 += 'I start work at ' + workStart + ' and work ' + workplace + '.';
        } else {
          s3 += name + ' starts work at ' + workStart + ' and works ' + workplace + '.';
        }
        sentences.push(s3);

        // Present continuous sentence (this week / right now)
        if (useCont) {
          let s4 = '';
          if (useAdv) {
            s4 += 'Right now, ';
            adverbCount++;
          }
          if (isI) {
            s4 += 'I am working on a special project this week.';
          } else {
            s4 += name + ' is working on a special project this week.';
          }
          continuousCount++;
          sentences.push(s4);
        }

        // Evening sentence
        let s5 = '';
        if (useSeq && seqWords[3]) {
          s5 += seqWords[3] + ', ';
          seqCount++;
        }
        if (useAdv) {
          s5 += 'In the evening, ';
          adverbCount++;
        }
        if (isI) {
          s5 += 'I usually spend my evening ' + evening + '.';
        } else {
          s5 += name + ' usually spends the evening ' + evening + '.';
        }
        sentences.push(s5);

        const paragraph = sentences.join(' ');
        if (rbOutput) rbOutput.textContent = paragraph;

        // Determine approximate level
        let levelText = '';
        if (continuousCount >= 1 && adverbCount >= 3 && seqCount >= 3) {
          levelText = 'Estimated level: B1+ ‚Äî good control of present simple / continuous, adverbs and sequencing.';
        } else if ((continuousCount >= 1 && adverbCount >= 2) || seqCount >= 2) {
          levelText = 'Estimated level: A2‚ÄìB1 ‚Äî mix of tenses with some adverbs and sequencing.';
        } else {
          levelText = 'Estimated level: A1‚ÄìA2 ‚Äî basic present simple with limited connectors.';
        }
        if (rbLevel) rbLevel.textContent = levelText;
      }

      function speakParagraph() {
        if (!rbOutput) return;
        const text = rbOutput.textContent.trim();
        if (!text) {
          alert('Build your paragraph first.');
          return;
        }
        if (!('speechSynthesis' in window)) {
          alert('Speech synthesis is not supported in this browser.');
          return;
        }
        window.speechSynthesis.cancel();
        currentUtterance = new SpeechSynthesisUtterance(text);
        currentUtterance.lang = 'en-US';
        window.speechSynthesis.speak(currentUtterance);
      }

      function togglePauseSpeech() {
        if (!('speechSynthesis' in window)) return;
        if (!window.speechSynthesis.speaking) return;

        if (window.speechSynthesis.paused) {
          window.speechSynthesis.resume();
          if (rbPauseBtn) rbPauseBtn.textContent = '‚è∏ Pause';
        } else {
          window.speechSynthesis.pause();
          if (rbPauseBtn) rbPauseBtn.textContent = '‚ñ∂ Resume';
        }
      }

      function resetBuilder() {
        if (rbSubject) rbSubject.value = 'I';
        if (rbWakeup) rbWakeup.value = '7:00';
        if (rbFrequency) rbFrequency.value = 'usually';
        if (rbWorkstart) rbWorkstart.value = '8:30';
        if (rbWorkplace) rbWorkplace.value = 'in an office';
        if (rbEvening) rbEvening.value = 'relaxing and watching TV';

        rbActivities.forEach(ch => (ch.checked = false));
        if (rbUseContinuous) rbUseContinuous.checked = false;
        if (rbUseAdverbs) rbUseAdverbs.checked = false;
        if (rbUseSequencing) rbUseSequencing.checked = false;

        if (rbOutput) rbOutput.textContent = '';
        if (rbLevel) rbLevel.textContent = '';

        if ('speechSynthesis' in window) {
          window.speechSynthesis.cancel();
        }
        if (rbPauseBtn) rbPauseBtn.textContent = '‚è∏ Pause';
      }

      if (rbBuildBtn) rbBuildBtn.addEventListener('click', buildParagraph);
      if (rbListenBtn) rbListenBtn.addEventListener('click', speakParagraph);
      if (rbPauseBtn) rbPauseBtn.addEventListener('click', togglePauseSpeech);
      if (rbResetBtn) rbResetBtn.addEventListener('click', resetBuilder);
    });
  </script>
</body>
</html>
